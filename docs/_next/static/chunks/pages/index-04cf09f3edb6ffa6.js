(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4038:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8070)}])},8070:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return M}});var r=t(4637),a=t(9104),o=t.n(a),i=t(3898),s=t(4463),c=t(3031);var l='\ndeclare function $$loadEnv(path?: string) : void;\ndeclare function $$readFile(path: string, parseJSON?: false) : string;\ndeclare function $$inline<F extends (...args: any) => any>(func: F, params: Parameters<F>, doNotCall: any) : () => ReturnType<F>;\ndeclare function $$inline<F extends (...args: any) => any>(func: F, params: Parameters<F>) : ReturnType<F>;\ndeclare function $$kindof(ast: unknown) : number;\ndeclare function $$define(varname: string, initializer: unknown, let?: boolean, exportDecl?: boolean) : void;\ndeclare function $$i() : number;\ndeclare function $$length(arr: Array<any>|string) : number;\ndeclare function $$ident(str: string) : any;\ndeclare function $$err(str: string) : void;\ndeclare function $$includes<T>(arr: Array<T>, val: T) : boolean;\ndeclare function $$includes(arr: string, val: string) : boolean;\ndeclare function $$slice<T>(str: Array<T>, start?: number, end?: number) : Array<T>;\ndeclare function $$slice(str: string, start?: number, end?: number) : string;\ndeclare function $$ts<T = unknown>(code: string) : T;\ndeclare function $$escape<T>(code: () => T) : T;\ndeclare function $$typeToString<T>(simplify?: boolean, nonNull?: boolean, fullExpand?: boolean) : string;\ndeclare function $$propsOfType<T>() : Array<string>;\ndeclare function $$typeAssignableTo<T, K>() : boolean;\ndeclare function $$comptime(fn: () => void) : void;\ninterface RawContext {\n    ts: any,\n    factory: any,\n    transformer: any,\n    checker: any,\n    thisMacro: any,\n    error: (node: any, message: string) => void\n}\ndeclare function $$raw<T>(fn: (ctx: RawContext, ...args: any[]) => ts.Node | ts.Node[] | undefined) : T;\ndeclare function $$text(exp: any) : string;\ndeclare function $$decompose(exp: any) : any[];\ndeclare function $$map<T>(exp: T, mapper: (value: any, parent: number) => any) : T;\ntype TypeMetadataJSDocTagCollection = Record<string, string|true>;\ninterface TypeMetadataProperty {\n    name: string,\n    tags: TypeMetadataJSDocTagCollection,\n    type: string,\n    optional: boolean\n}\ninterface TypeMetadataMethod {\n    name: string,\n    tags: TypeMetadataJSDocTagCollection,\n    parameters: Array<{name: string, type: string, optional: boolean}>,\n    returnType: string\n}\ninterface TypeMedatada {\n    name: string,\n    properties: TypeMetadataProperty[],\n    methods: TypeMetadataMethod[]\n}\ndeclare function $$typeMetadata<T>(collectProps?: boolean, collectMethods?: boolean) : TypeMedatada;\ntype Accumulator = number & { __marker?: "Accumulator" };\ntype Save<T> = T & { __marker?: "Save" };\ntype EmptyDecorator = (...props: any) => void;\nconst enum LabelKinds {\n    If,\n    ForIter,\n    For,\n    While,\n    Block\n}\ninterface IfLabel {\n    kind: LabelKinds.If\n    condition: any,\n    then: any,\n    else: any\n}\ninterface ForIterLabel {\n    kind: LabelKinds.ForIter,\n    type: "in" | "of",\n    initializer: any,\n    iterator: any,\n    statement: any\n}\ninterface ForLabel {\n    kind: LabelKinds.For,\n    initializer: {\n        expression?: any,\n        variables?: Array<[variableName: string, initializer: any]>\n    },\n    condition: any,\n    increment: any,\n    statement: any\n}\ninterface WhileLabel {\n    kind: LabelKinds.While,\n    do: boolean,\n    condition: any,\n    statement: any\n}\ninterface BlockLabel {\n    kind: LabelKinds.Block,\n    statement: any\n}\ntype Label = IfLabel | ForIterLabel | ForLabel | WhileLabel | BlockLabel;\n';for(var u in l+="const enum SyntaxKind {\n",Object.keys(o().SyntaxKind))o().SyntaxKind[u]&&(l+="".concat(o().SyntaxKind[u]," = ").concat(u,",\n"));l+="\n}\n";var d={noImplicitAny:!0,strictNullChecks:!0,target:o().ScriptTarget.ESNext,experimentalDecorators:!0,lib:["ES5"]};function p(n){i.wN.clear();var e,t,r,a,u=o().createSourceFile("module.ts",l+n,d.target||o().ScriptTarget.ESNext,!0),p=[],f={getSourceFile:function(n){if("module.ts"===n)return u},getDefaultLibFileName:function(){return"lib.d.ts"},useCaseSensitiveFileNames:function(){return!1},getCanonicalFileName:function(n){return n},writeFile:function(){},getCurrentDirectory:function(){return""},getNewLine:function(){return"\n"},fileExists:function(){return!0},readFile:function(){return""},directoryExists:function(){return!0},getDirectories:function(){return[]}},m=o().createProgram(["module.ts"],d,f);try{m.emit(void 0,(function(n,e){return t=e}),void 0,void 0,{before:[function(n){var t=new c.n(n,m.getTypeChecker(),i.wN);return function(n){var r=t.run(n);return e=(0,s.QM)(m.getTypeChecker(),r),r}}]})}catch(y){r=y,(null!=(a=i.m2)&&"undefined"!==typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](r):r instanceof a)&&p.push(y)}return{transpiledSourceCode:t,generatedTypes:{fromMacros:e?e.print(e.typeNodes):"",chainTypes:e?e.print(e.chainTypes):""},errors:p}}var f=t(9496),m=t(5471);function y(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function g(n){var e=(0,m.Ik)(),t=(0,f.useState)(),a=t[0],o=t[1],i=(0,f.useState)(),s=i[0],c=i[1],u=(0,f.useState)(),p=u[0],g=u[1],h="ts:ts-macros/generated_types.d.ts",b="ts:ts-macros/chain_types.d.ts";return(0,f.useEffect)((function(){var t,r;if(e){e.languages.typescript.javascriptDefaults.setCompilerOptions(function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){y(n,e,t[e])}))}return n}({},d)),e.languages.typescript.typescriptDefaults.setDiagnosticsOptions({diagnosticCodesToIgnore:[1219]});var a="ts:ts-macros/markers.d.ts";e.languages.typescript.javascriptDefaults.addExtraLib(l,a),e.editor.createModel(l,"typescript",e.Uri.parse(a));var o=(null===(t=n.libCode)||void 0===t?void 0:t.fromMacros)||"";e.languages.typescript.javascriptDefaults.addExtraLib(o,h),c(e.editor.createModel(o,"typescript",e.Uri.parse(h)));var i="export {};\n\n".concat((null===(r=n.libCode)||void 0===r?void 0:r.chainTypes)||"");e.languages.typescript.javascriptDefaults.addExtraLib(i,b),g(e.editor.createModel(i,"typescript",e.Uri.parse(b)))}}),[e]),(0,f.useEffect)((function(){var t,r;e&&(null===s||void 0===s||s.setValue((null===(t=n.libCode)||void 0===t?void 0:t.fromMacros)||""),null===p||void 0===p||p.setValue("export {};\n\n".concat((null===(r=n.libCode)||void 0===r?void 0:r.chainTypes)||"")))}),[n.libCode]),(0,f.useEffect)((function(){if(e&&a){var t=a.getModel();t&&e.editor.setModelMarkers(t,"_",n.errors.map((function(n){var e=t.getPositionAt(n.start),r=t.getPositionAt(n.start+n.length);return{message:n.rawMsg,severity:8,startColumn:e.column,startLineNumber:e.lineNumber,endColumn:r.column,endLineNumber:r.lineNumber}})))}}),[n.errors]),(0,r.jsx)(m.ZP,{height:"calc(90vh - 50px)",language:"typescript",theme:"vs-dark",value:n.code,onChange:n.onChange,onMount:function(n){return o(n)}})}var h,b=t(9342),v=t(2838),x=t.n(v);function j(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function $(n,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](n):n instanceof e}function T(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,o=[],i=!0,s=!1;try{for(t=t.call(n);!(i=(r=t.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(c){s=!0,a=c}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}}(n,e)||w(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(n){return function(n){if(Array.isArray(n))return j(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||w(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(n,e){if(n){if("string"===typeof n)return j(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j(n,e):void 0}}function N(n){switch(n){case h.Log:return(0,r.jsxs)("span",{className:x().code,children:["[",(0,r.jsx)("span",{style:{color:"#236cfc",fontWeight:"bold"},children:"LOG"}),"]:"]});case h.Error:return(0,r.jsxs)("span",{className:x().code,children:["[",(0,r.jsx)("span",{style:{color:"#961a1a",fontWeight:"bold"},children:"ERR"}),"]:"]});case h.Warn:return(0,r.jsxs)("span",{className:x().code,children:["[",(0,r.jsx)("span",{style:{color:"orange",fontWeight:"bold"},children:"WARN"}),"]:"]})}}function S(n,e,t,a){return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("span",{className:x().code,children:[(0,r.jsx)("span",{className:x().classNameIdent,children:e.constructor&&e.constructor.name&&"Object"!==e.constructor.name&&e.constructor.name+" "||""}),a||"","{",(0,r.jsx)("br",{}),(0,r.jsx)("span",{children:n.map((function(n,e){var a=T(n,2),o=a[0],i=a[1];return(0,r.jsxs)("span",{children:[!!e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:x().comma,children:", "}),(0,r.jsx)("br",{})]}),(0,r.jsxs)("span",{children:["  ".repeat(t||2),o,": ",A(i,(t||2)+1)]})]},e)}))}),(0,r.jsx)("br",{}),"  ".repeat(t?t-1:1)+"}"]})})}function A(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("string"===typeof n)return(0,r.jsxs)("span",{className:"".concat(x().code," ").concat(x().string),children:['"',n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),'"']});if("number"===typeof n)return(0,r.jsx)("span",{className:"".concat(x().code," ").concat(x().number),children:n});if("function"===typeof n)return(0,r.jsx)("span",{className:x().code,children:"[Function]"});if(void 0===n)return(0,r.jsx)("span",{className:"".concat(x().code," ").concat(x().keyword),children:"undefined"});if(null===n)return(0,r.jsx)("span",{className:"".concat(x().code," ").concat(x().keyword),children:"null"});if(!0===n)return(0,r.jsx)("span",{className:"".concat(x().code," ").concat(x().keyword),children:"true"});if(!1===n)return(0,r.jsx)("span",{className:"".concat(x().code," ").concat(x().keyword),children:"false"});if(Array.isArray(n))return(0,r.jsxs)("span",{className:x().code,children:["[",n.map((function(n,t){return(0,r.jsxs)("span",{children:[!!t&&(0,r.jsx)("span",{className:x().comma,children:", "}),A(n,e+1)]},t)})),"]"]});if($(n,Map))return S(_(n.entries()),n,e,"(".concat(n.size,") "));if($(n,Set))return(0,r.jsxs)("span",{className:x().code,children:[(0,r.jsx)("span",{className:x().classNameIdent,children:"Set "}),"(",n.size,")"," {",_(n.values()).map((function(n,t){return(0,r.jsxs)("span",{children:[!!t&&(0,r.jsx)("span",{className:x().comma,children:", "}),A(n,e+1)]},t)})),"}"]});var t=Object.entries(n);return 0===t.length?(0,r.jsx)(r.Fragment,{children:"{}"}):S(t,n,e)}function C(n){var e=(0,f.useState)([]),t=e[0],a=e[1],o=(0,f.useState)("100%"),i=o[0],s=o[1],c=(0,f.useRef)(null),l=(0,f.useRef)(null),u=function(){c.current&&s("".concat(window.innerHeight-c.current.clientHeight-165,"px"))};(0,f.useEffect)((function(){u(),function(){var n=l.current;n&&(n.scrollTop=n.scrollHeight)}()}),[t]);var d={log:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];a(_(t).concat(_(e.map((function(n){return{kind:h.Log,message:n}})))))},warn:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];a(_(t).concat(_(e.map((function(n){return{kind:h.Warn,message:n}})))))},error:function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];a(_(t).concat(_(e.map((function(n){return{kind:h.Error,message:n}})))))}};return(0,r.jsxs)(b.Z,{split:"horizontal",defaultSize:"70%",primary:"first",onDragFinished:u,children:[(0,r.jsxs)("div",{style:{width:"100%"},ref:c,children:[(0,r.jsx)(m.ZP,{height:"80vh",language:"javascript",theme:"vs-dark",value:n.code,options:{readOnly:!0}}),";"]}),(0,r.jsxs)("div",{className:x().runSection,children:[(0,r.jsx)("button",{className:x().button,onClick:function(){try{new Function("console",n.code)(d)}catch(e){$(e,Error)&&d.error(e.message)}},children:"Run"}),(0,r.jsx)("button",{className:x().button,onClick:function(){return a([])},children:"Clear"}),(0,r.jsx)("br",{}),(0,r.jsx)("div",{className:x().runSectionResult,style:{height:i},ref:l,children:t.map((function(n,e){return(0,r.jsxs)("div",{children:[!!e&&(0,r.jsx)("div",{className:x().logSeparator}),N(n.kind)," ",A(n.message)]},e)}))})]})]})}!function(n){n[n.Log=0]="Log",n[n.Error=1]="Error",n[n.Warn=2]="Warn"}(h||(h={}));var k=t(7581),I=['function $contains<T>(value: T, possible: Array<T>) {\n    return +["||", [possible], (val: T) => value === val];\n}\n    \nconst searchItem = "google";\nconsole.log($contains!(searchItem, ["erwin", "tj"]));',"function $try(resultObj: Save<{ value?: number, is_err: () => boolean}>) {\n    $$escape!(() => {\n        if (resultObj.is_err()) {\n            return resultObj;\n        }\n    });\n    return resultObj.value;\n}\n\n\nconst a = $try!({ value: 123, is_err: () => false });\nconsole.log(val);",'type ClassInfo = { name: string, value: string };\n\nfunction $makeClasses(...info: Array<ClassInfo>) {\n    +[[info], (classInfo: ClassInfo) => {\n        $$ts!(`\n            class ${classInfo.name} {\n                constructor() {\n                    this.value = ${classInfo.value}\n                }\n            }\n        `);\n    }];\n}\n\n$makeClasses!({name: "A", value: "123"}, {name: "B", value: "345"});','function $map<T, R>(arr: Save<Array<T>>, cb: (item: T) => R) : Array<R> {\n    $$escape!(() => {\n        const res = [];\n        for (let i=0; i < arr.length; i++) {\n        res.push($$inline!(cb, [arr[i]]));\n        }\n    });\n    return $$ident!("res");\n}\n\nconsole.log($map!([1, 2, 3, 4, 5, 6, 7, 8, 9], (num) => num * 2));',"function $ToInterval(info: WhileLabel, intervalTimer = 1000) {\n    const interval = setInterval(() => {\n        if (info.condition) {\n            $$inline!(info.statement, []);\n        } else {\n            clearInterval(interval);\n        }\n    }, intervalTimer);\n}\n\nconst arr = [1, 3, 4, 5, 6];\n\n$ToInterval:\nwhile (arr.length !== 0) {\n    console.log(arr.pop());\n}",'\nfunction $renameClass(newName: string) : EmptyDecorator {\n    return $$raw!((ctx, newNameNode) => {\n       const target = ctx.thisMacro.target;\n       return ctx.factory.createClassDeclaration(\n            target.modifiers?.filter(m => m.kind !== ctx.ts.SyntaxKind.Decorator),\n            ctx.factory.createIdentifier(newNameNode.text),\n            target.typeParameters,\n            target.heritageClauses,\n            target.members\n        )\n    });\n}\n\n@$renameClass!("NewTest")\nclass Test {\n    propA: number\n    propB: string\n    constructor(a: number, b: string) {\n        this.propA = a;\n        this.propB = b;\n    }\n}\n\nconsole.log(new NewTest(1, "hello!"));\n'],E="\n// Interactive playground!\n// Write your code here and see the transpiled result.\n// All types and functions from the library are already imported!\n\n".concat(I[Math.floor(Math.random()*I.length)],"\n");function F(){var n=(0,f.useState)(),e=n[0],t=n[1],a=(0,f.useState)([]),o=a[0],i=a[1],s=(0,f.useState)(),c=s[0],l=s[1],u=(0,f.useState)(),d=u[0],m=u[1],y=function(n){t(n);var e=p(n),r=e.generatedTypes,a=e.errors,o=e.transpiledSourceCode;m(o),l(r),i(a)};return(0,f.useEffect)((function(){var n=Object.fromEntries(new URLSearchParams(window.location.search).entries());if(n.code){var e=(0,k.decompressFromEncodedURIComponent)(n.code);if(!e)return;y(e)}else y(E)}),[]),(0,r.jsxs)("div",{className:x().app,children:[(0,r.jsxs)("header",{className:x().header,children:[(0,r.jsxs)("div",{style:{display:"flex"},children:[(0,r.jsx)("h2",{children:"Typescript Macros"}),(0,r.jsx)("button",{className:x().button,onClick:function(){e&&navigator.permissions.query({name:"clipboard-write"}).then((function(n){"granted"!=n.state&&"prompt"!=n.state||navigator.clipboard.writeText(location.origin+location.pathname+"?code=".concat((0,k.compressToEncodedURIComponent)(e)))}))},children:"Copy Link"})]}),(0,r.jsx)("a",{href:"https://github.com/GoogleFeud/ts-macros",style:{fontSize:"24px"},children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",fill:"currentColor",viewBox:"0 0 16 16",children:(0,r.jsx)("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})})]}),(0,r.jsx)("div",{className:x().mainContent,children:(0,r.jsxs)(b.Z,{split:"vertical",defaultSize:"50%",primary:"first",style:{position:"static"},children:[(0,r.jsx)(g,{code:e,libCode:c,errors:o,onChange:function(n){y(n||"")}}),(0,r.jsx)(C,{code:d||""})]})}),(0,r.jsx)("footer",{className:x().footer,children:(0,r.jsxs)("p",{children:["Made with \u2764\ufe0f by ",(0,r.jsx)("a",{href:"https://github.com/GoogleFeud",children:"GoogleFeud"}),"."]})})]})}function M(){return(0,r.jsx)(F,{})}},2838:function(n){n.exports={app:"App_app__8ih7_",header:"App_header__3xFa8",mainContent:"App_mainContent__k7OS5",footer:"App_footer__qJi0F",button:"App_button__Z9okP",runSection:"App_runSection__ptbmi",runSectionResult:"App_runSectionResult__ZpuvE",code:"App_code__SP5sZ",number:"App_number__XeXtQ",string:"App_string__VMgjU",keyword:"App_keyword__MoW95",comma:"App_comma__YKHTd",classNameIdent:"App_classNameIdent__UHLq5",logSeparator:"App_logSeparator__VBwEH",Pane:"App_Pane__XZBvi"}},3377:function(n){function e(n){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=function(){return[]},e.resolve=e,e.id=3377,n.exports=e},6569:function(){},1738:function(){},7236:function(){},9583:function(){},1895:function(){},1997:function(){},9767:function(){},322:function(){},755:function(){},8166:function(){},3642:function(){},521:function(){},9492:function(){}},function(n){n.O(0,[417,411,774,888,179],(function(){return e=4038,n(n.s=e);var e}));var e=n.O();_N_E=e}]);